fileFormatVersion: 2
guid: 0c7fb49010cfda543861e7ae602ce6ca
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst Itemtransformable_1 = require(\"../Player/Itemtransformable\");\r\nconst
    UITransformableButton_1 = require(\"../UI/UITransformableButton\");\r\nconst
    GameManager_1 = require(\"./GameManager\");\r\nconst MultiplayerPropHuntManager_1
    = require(\"../Multiplayer/MultiplayerPropHuntManager\");\r\nconst ZEPETO_Character_Controller_1
    = require(\"ZEPETO.Character.Controller\");\r\nconst NonHunterController_1 =
    require(\"../Player/NonHunterController\");\r\nclass TransformableItemsManager
    extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n       
    super(...arguments);\r\n        this.itemsTransformablesSO = [];\r\n        this._allItemsTransformables
    = new Map();\r\n    }\r\n    Awake() {\r\n        if (ZEPETO_Script_1.ZepetoScriptBehaviour.op_Inequality(TransformableItemsManager.instance,
    null))\r\n            UnityEngine_1.GameObject.Destroy(this.gameObject);\r\n       
    else\r\n            TransformableItemsManager.instance = this;\r\n        this._allButtons
    = [];\r\n    }\r\n    Start() {\r\n        this.InstantiateButtons();\r\n   
    }\r\n    InstantiateButtons() {\r\n        this.itemsTransformablesSO.forEach(element
    => {\r\n            let newUITransformableButton = UnityEngine_1.GameObject.Instantiate(this.uiTransformableButtonTemplate,
    this.transformableButtonsParent);\r\n            newUITransformableButton.GetComponent($typeof(UITransformableButton_1.default)).SetButton(element.targetObject);\r\n           
    this._allButtons.push(newUITransformableButton.GetComponent($typeof(UITransformableButton_1.default)));\r\n       
    });\r\n    }\r\n    TransformPlayer(itemId, sessionId) {\r\n        let playerData
    = MultiplayerPropHuntManager_1.default.instance.GetPlayerData(sessionId);\r\n       
    if (playerData.isHunter)\r\n            return;\r\n        if (!this.CheckItemExist(itemId))
    {\r\n            const zepetoPlayer = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetPlayer(sessionId).character.gameObject;\r\n           
    zepetoPlayer.GetComponent($typeof(NonHunterController_1.default)).ResetNonHunter();\r\n           
    return;\r\n        }\r\n        let tempItemTransfromablethis = this.GetItemAvailable(itemId);\r\n       
    if (tempItemTransfromablethis) {\r\n            const zepetoPlayer = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetPlayer(sessionId).character.gameObject;\r\n           
    zepetoPlayer.GetComponent($typeof(NonHunterController_1.default)).TransformIntoItem(tempItemTransfromablethis);\r\n           
    tempItemTransfromablethis.SetActive(true);\r\n            console.log(\"Transform
    in: \" + tempItemTransfromablethis.name + \" SessionId: \" + sessionId);\r\n       
    }\r\n    }\r\n    TransformLocalPlayer(itemId) {\r\n        MultiplayerPropHuntManager_1.default.instance.ChangeItem(itemId);\r\n   
    }\r\n    CheckItemExist(itemId) {\r\n        if (!this._allItemsTransformables.has(itemId))
    {\r\n            let exist = false;\r\n            this._allButtons.forEach(button
    => {\r\n                if (button._myItemTransformable.itemId == itemId) {\r\n                   
    this._allItemsTransformables.set(itemId, []);\r\n                    this.CreateNewItem(itemId);\r\n                   
    exist = true;\r\n                }\r\n            });\r\n            return exist;\r\n       
    }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n   
    GetItemAvailable(itemId) {\r\n        let items = this._allItemsTransformables.get(itemId);\r\n       
    let item;\r\n        let itemAvailable = false;\r\n        for (let index = 0;
    index < items.length; index++) {\r\n            const currentItem = items[index];\r\n           
    if (!currentItem.activeSelf) {\r\n                item = currentItem;\r\n               
    itemAvailable = true;\r\n                break;\r\n            }\r\n        }\r\n       
    if (!itemAvailable) {\r\n            item = this.CreateNewItem(itemId);\r\n       
    }\r\n        return item;\r\n    }\r\n    CreateNewItem(itemId) {\r\n       
    let item;\r\n        this._allButtons.forEach(button => {\r\n            if (button._myItemTransformable.itemId
    == itemId) {\r\n                item = UnityEngine_1.GameObject.Instantiate(button._myItemTransformable.itemPrefab,
    this.transform);\r\n                item.SetActive(false);\r\n               
    this._allItemsTransformables.get(itemId).push(item);\r\n                let savedItems
    = this._allItemsTransformables.get(itemId);\r\n                this._allItemsTransformables.set(itemId,
    savedItems);\r\n                return item;\r\n            }\r\n        });\r\n       
    return item;\r\n    }\r\n}\r\nexports.default = TransformableItemsManager;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmb3JtYWJsZUl0ZW1zTWFuYWdlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlRyYW5zZm9ybWFibGVJdGVtc01hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpREFBNkU7QUFDN0UsNkNBQW9EO0FBQ3BELG1FQUEyRDtBQUMzRCx1RUFBZ0U7QUFDaEUsK0NBQXdDO0FBQ3hDLDBGQUFtRjtBQUNuRiw2RUFBNEQ7QUFDNUQsdUVBQWdFO0FBR2hFLE1BQXFCLHlCQUEwQixTQUFRLHFDQUFxQjtJQUE1RTs7UUFLVywwQkFBcUIsR0FBZ0QsRUFBRSxDQUFDO1FBRXZFLDRCQUF1QixHQUE4QixJQUFJLEdBQUcsRUFBd0IsQ0FBQztJQXNHakcsQ0FBQztJQW5HRyxLQUFLO1FBQ0QsSUFyQkMscUNBQXFCLENBdUh3MEUsYUFBYyxDQWxHeDJFLHlCQUF5QixDQUFDLFFBQVEsRUFBSSxJQUFJO1lBQUUsd0JBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOztZQUMvRSx5QkFBeUIsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBRS9DLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxLQUFLO1FBQ0QsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVNLGtCQUFrQjtRQUNyQixJQUFJLENBQUMscUJBQXFCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3pDLElBQUksd0JBQXdCLEdBQTBCLHdCQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxJQUFJLENBQUMsMEJBQTBCLENBQTBCLENBQUM7WUFDM0ssd0JBQXdCLENBQUMsWUFBWSxTQUFDLCtCQUFxQixHQUFJLFNBQVMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFL0YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsd0JBQXdC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","assetPath":"Assets/PropHunt_Template/_Scripts/Managers/TransformableItemsManager.ts","manifest":{"properties":[{"assembly":"UnityEngine.CoreModule","name":"uiTransformableButtonTemplate","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"transformableButtonsParent","type":"UnityEngine.Transform","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"ZEPETO.Script","name":"itemsTransformablesSO","type":"ZEPETO.Script.ZepetoScriptableObject[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"TransformableItemsManager","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: 669e52be9b1807da79a1637fadb3328e
  onlyWriteTrigger: 0
