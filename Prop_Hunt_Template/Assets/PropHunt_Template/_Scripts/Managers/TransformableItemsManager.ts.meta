fileFormatVersion: 2
guid: 0c7fb49010cfda543861e7ae602ce6ca
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst Itemtransformable_1 = require(\"../Player/Itemtransformable\");\r\nconst
    UITransformableButton_1 = require(\"../UI/UITransformableButton\");\r\nconst
    GameManager_1 = require(\"./GameManager\");\r\nconst MultiplayerPropHuntManager_1
    = require(\"../Multiplayer/MultiplayerPropHuntManager\");\r\nconst ZEPETO_Character_Controller_1
    = require(\"ZEPETO.Character.Controller\");\r\nconst NonHunterController_1 =
    require(\"../Player/NonHunterController\");\r\nclass TransformableItemsManager
    extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n       
    super(...arguments);\r\n        this.itemsTransformablesSO = [];\r\n        this._allItemsTransformables
    = new Map();\r\n    }\r\n    Awake() {\r\n        if (ZEPETO_Script_1.ZepetoScriptBehaviour.op_Inequality(TransformableItemsManager.instance,
    null))\r\n            UnityEngine_1.GameObject.Destroy(this.gameObject);\r\n       
    else\r\n            TransformableItemsManager.instance = this;\r\n        this._allButtons
    = [];\r\n    }\r\n    Start() {\r\n        this.InstantiateButtons();\r\n   
    }\r\n    InstantiateButtons() {\r\n        this.itemsTransformablesSO.forEach(element
    => {\r\n            let newUITransformableButton = UnityEngine_1.GameObject.Instantiate(this.uiTransformableButtonTemplate,
    this.transformableButtonsParent);\r\n            newUITransformableButton.GetComponent($typeof(UITransformableButton_1.default)).SetButton(element.targetObject);\r\n           
    this._allButtons.push(newUITransformableButton.GetComponent($typeof(UITransformableButton_1.default)));\r\n       
    });\r\n    }\r\n    TransformPlayer(itemId, sessionId) {\r\n        if (!this.CheckItemExist(itemId))\r\n           
    return;\r\n        let tempItemTransfromablethis = this.GetItemAvailable(itemId);\r\n       
    let playerData = MultiplayerPropHuntManager_1.default.instance.GetPlayerData(sessionId);\r\n       
    if (tempItemTransfromablethis && !playerData.isHunter) {\r\n            const
    zepetoPlayer = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetPlayer(sessionId).character.gameObject;\r\n           
    zepetoPlayer.GetComponent($typeof(NonHunterController_1.default)).TransformIntoItem(tempItemTransfromablethis);\r\n           
    tempItemTransfromablethis.SetActive(true);\r\n            console.log(\"Transform
    in: \" + tempItemTransfromablethis.name + \" SessionId: \" + sessionId);\r\n       
    }\r\n    }\r\n    TransformLocalPlayer(itemId) {\r\n        MultiplayerPropHuntManager_1.default.instance.ChangeItem(itemId);\r\n   
    }\r\n    CheckItemExist(itemId) {\r\n        if (!this._allItemsTransformables.has(itemId))
    {\r\n            let exist = false;\r\n            this._allButtons.forEach(button
    => {\r\n                if (button._myItemTransformable.itemId == itemId) {\r\n                   
    this._allItemsTransformables.set(itemId, []);\r\n                    this.CreateNewItem(itemId);\r\n                   
    exist = true;\r\n                }\r\n            });\r\n            return exist;\r\n       
    }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n   
    GetItemAvailable(itemId) {\r\n        let items = this._allItemsTransformables.get(itemId);\r\n       
    let item;\r\n        let itemAvailable = false;\r\n        for (let index = 0;
    index < items.length; index++) {\r\n            const currentItem = items[index];\r\n           
    if (!currentItem.activeSelf) {\r\n                item = currentItem;\r\n               
    itemAvailable = true;\r\n                break;\r\n            }\r\n        }\r\n       
    if (!itemAvailable) {\r\n            item = this.CreateNewItem(itemId);\r\n       
    }\r\n        return item;\r\n    }\r\n    CreateNewItem(itemId) {\r\n       
    let item;\r\n        this._allButtons.forEach(button => {\r\n            if (button._myItemTransformable.itemId
    == itemId) {\r\n                item = UnityEngine_1.GameObject.Instantiate(button._myItemTransformable.itemPrefab,
    this.transform);\r\n                item.SetActive(false);\r\n               
    this._allItemsTransformables.get(itemId).push(item);\r\n                let savedItems
    = this._allItemsTransformables.get(itemId);\r\n                this._allItemsTransformables.set(itemId,
    savedItems);\r\n                return item;\r\n            }\r\n        });\r\n       
    return item;\r\n    }\r\n}\r\nexports.default = TransformableItemsManager;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmb3JtYWJsZUl0ZW1zTWFuYWdlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlRyYW5zZm9ybWFibGVJdGVtc01hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpREFBNkU7QUFDN0UsNkNBQW9EO0FBQ3BELG1FQUEyRDtBQUMzRCx1RUFBZ0U7QUFDaEUsK0NBQXdDO0FBQ3hDLDBGQUFtRjtBQUNuRiw2RUFBNEQ7QUFDNUQsdUVBQWdFO0FBR2hFLE1BQXFCLHlCQUEwQixTQUFRLHFDQUFxQjtJQUE1RTs7UUFLVywwQkFBcUIsR0FBZ0QsRUFBRSxDQUFDO1FBRXZFLDRCQUF1QixHQUE4QixJQUFJLEdBQUcsRUFBd0IsQ0FBQztJQStGakcsQ0FBQztJQTVGRyxLQUFLO1FBQ0QsSUFyQkMscUNBQXFCLENBZ0hvakYsYUFBYyxDQTNGcGxGLHlCQUF5QixDQUFDLFFBQVEsRUFBSSxJQUFJO1lBQUUsd0JBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOztZQUMvRSx5QkFBeUIsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBRS9DLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxLQUFLO1FBQ0QsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVNLGtCQUFrQjtRQUNyQixJQUFJLENBQUMscUJBQXFCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3pDLElBQUksd0JBQXdCLEdBQTBCLHdCQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxJQUFJLENBQUMsMEJBQTBCLENBQTBCLENBQUM7WUFDM0ssd0JBQXdCLENBQUMsWUFBWSxTQUFDLCtCQUFxQixHQUFJLFNBQVMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFL0YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsd0JBQXdC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","assetPath":"Assets/PropHunt_Template/_Scripts/Managers/TransformableItemsManager.ts","manifest":{"properties":[{"assembly":"UnityEngine.CoreModule","name":"uiTransformableButtonTemplate","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"transformableButtonsParent","type":"UnityEngine.Transform","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"ZEPETO.Script","name":"itemsTransformablesSO","type":"ZEPETO.Script.ZepetoScriptableObject[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"TransformableItemsManager","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: bf278901535fe741fb97fb20c93ac1f9
  onlyWriteTrigger: 0
